Стоит заметить, что это тема коррелирует с [[1.2 Особенности]],  а также говорилось о них в [[2.2 Структуры данных]].
## Определение и назначение

**Maps** и **keyword lists** (ключевые списки) представляют собой структуры данных, предназначенные для хранения ассоциативных коллекций в языке программирования Elixir. Они позволяют организовывать данные в виде пар "ключ-значение", что обеспечивает эффективный доступ и изменение данных по ключу. Несмотря на общую концепцию, данные структуры имеют различные реализации, свойства и области применения.

## Keyword lists (Ключевые списки)

### Основные характеристики

- Являются списками пар вида `{ключ, значение}`, где `ключ` — атом.
- Сохраняют порядок элементов.
- Позволяют использовать одинаковые ключи несколько раз.
- Обеспечивают линейную сложность поиска (`O(n)`), так как реализованы на основе списков.
- Часто применяются для передачи опций в функции, благодаря синтаксическим особенностям.

### Синтаксис

```css
[ключ1: значение1, ключ2: значение2, ...]
```

Аналогична записи:

```css
[{:ключ1, значение1}, {:ключ2, значение2}, ...]
```

### Особенности использования

- Вызов `list[:ключ]` возвращает первое найденное значение для указанного ключа.
- Возможна передача keyword lists как последних аргументов функций без обрамляющих квадратных скобок.
- Используются для опций, конфигураций, настроек и передачи параметров.
- Могут содержать дубликаты ключей, что позволяет реализовывать дополнительные сценарии.

### Примеры практического применения

- Передача опций в функции (например, `Enum.map(list, foo: :bar)`).
- Хранение метаданных, где важен порядок и возможность дублирования ключей.

## Maps (Ассоциативные массивы)

### Основные характеристики

- Ассоциативная структура данных, состоящая из пар "ключ-значение".
- Ключи могут быть любого типа (атомы, строки, числа и др.).
- Не допускают дублирование ключей; каждый ключ уникален.
- Не гарантируют сохранение порядка элементов.
- Обеспечивают эффективный доступ по ключу с амортизированной сложностью `O(1)`.
- Оптимальны для хранения больших объемов ассоциированных данных.
- Являются неизменяемыми структурами: любые изменения возвращают новый map.

### Синтаксис

```dart
%{ключ1 => значение1, ключ2 => значение2, ...}
```

Если ключ — атом, допустим сокращённый синтаксис:

```css
%{ключ1: значение1, ключ2: значение2}
```

### Особенности использования

- Доступ к элементам через `map[:ключ]` или `map.ключ` (только для атомов).
- Обновление значений осуществляется с помощью синтаксиса `%{map | ключ => новое_значение}`.
- Добавление новых пар и удаление существующих возвращает новый map.
- Используются для хранения уникальных пар "ключ-значение" и организации сложных вложенных структур данных.
- Поддерживают сопоставление с образцом (pattern matching).

### Примеры практического применения

- Моделирование сложных структур данных (например, пользовательские профили, параметры конфигурации).
- Сопоставление с образцом для извлечения данных из вложенных структур.
- Организация вложенных коллекций с уникальными ключами.

## Сравнительная характеристика keyword lists и maps

|Свойство|Keyword list|Map|
|---|---|---|
|Тип ключей|Только атомы|Любой тип|
|Порядок элементов|Сохраняется|Не гарантируется|
|Дубликаты ключей|Допускаются|Исключены|
|Сложность доступа|O(n)|O(1)|
|Использование по умолчанию|Опции, параметры функций|Структурированные данные|
|Сопоставление с образцом|Ограничено|Полноценно поддерживается|

## Неизменяемость и работа с данными

- Обе структуры данных неизменяемы: любые операции обновления, добавления или удаления возвращают новую версию структуры.
- Неизменяемость обеспечивает безопасность конкурентных вычислений и предотвращает побочные эффекты.
- Операции над maps и keyword lists не изменяют исходные данные, а возвращают модифицированные новые коллекции.

## Особенности взаимодействия с функциями и модулями стандартной библиотеки

- Модули `Keyword` и `Map` предоставляют специализированный набор функций для работы с соответствующими структурами.
- `Keyword` поддерживает поиск по ключу, фильтрацию, удаление и обновление элементов с учетом особенностей ключевых списков.
- `Map` предоставляет функции для добавления, обновления, удаления и извлечения значений, а также объединения map и сопоставления с образцом.

## Типичные области применения

- Keyword lists — опциональные параметры функций, небольшие наборы конфигураций, метаданные, когда важен порядок элементов или допускаются дублирующиеся ключи.
- Maps — структурированные данные, вложенные коллекции, передача и обработка уникальных пар "ключ-значение", сложные структуры и модели.

## Заключительные принципы

- Выбор между maps и keyword lists определяется требованиями к уникальности ключей, эффективности доступа, необходимости сохранения порядка и типу ключей.
- Обе структуры обеспечивают неизменяемость, способствуют безопасной обработке данных и широко применяются при построении функциональных и распределённых приложений на Elixir.