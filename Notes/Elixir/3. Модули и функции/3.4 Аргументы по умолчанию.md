Аргументы по умолчанию — это механизм задания значений параметров функции, которые будут автоматически использоваться, если значения для этих параметров не были переданы при вызове функции. В языке программирования Elixir аргументы по умолчанию обеспечивают гибкость и удобство при определении функций, позволяя определять меньшее количество вариантов функций с разным числом параметров.
## Определение аргументов по умолчанию

Аргументы по умолчанию задаются в определении функции с использованием оператора `=` внутри списка параметров. Значение, указанное после знака `=`, будет использовано, если соответствующий аргумент не передан при вызове функции.

```python
def имя_функции(параметр1, параметр2 \\ значение_по_умолчанию) do
  # тело функции
end
```
В данном синтаксисе двойной обратный слэш (`\\`) обозначает присваивание значения по умолчанию параметру функции.

## Правила задания аргументов по умолчанию

- Аргументы по умолчанию могут быть заданы для любого числа параметров, но только для последних по порядку в списке параметров функции.
- Параметры с аргументами по умолчанию должны следовать после обязательных параметров.
- Если функция вызывается без указания аргумента с заданным по умолчанию значением, используется это значение; если аргумент передается явно, используется переданное значение.
- Значение по умолчанию может быть любым валидным выражением Elixir.

## Пример использования аргументов по умолчанию

```ruby
def приветствие(имя, язык \\ "ru") do
  case язык do
    "ru" -> "Привет, #{имя}!"
    "en" -> "Hello, #{имя}!"
    _ -> "Здравствуйте, #{имя}!"
  end
end
```
В данном примере параметр `язык` имеет значение по умолчанию `"ru"`. Если функция `приветствие` вызывается с одним аргументом, используется русский язык. Если указан второй аргумент, используется переданное значение.

## Аргументы по умолчанию и определение функций

Elixir реализует аргументы по умолчанию через создание нескольких определений функций с разным количеством параметров (арность функции). При определении функции с аргументами по умолчанию компилятор автоматически создает дополнительные версии функции с уменьшенной арностью, подставляя значения по умолчанию для недостающих аргументов.

Например, определение:

```css
def пример(a, b \\ 2, c \\ 3) do
  {a, b, c}
end
```
Эквивалентно следующим вариантам:

- `пример(a, b, c)`
- `пример(a, b)` — будет вызвано как `пример(a, b, 3)`
- `пример(a)` — будет вызвано как `пример(a, 2, 3)`

## Взаимодействие с сопоставлением с образцом

При использовании аргументов по умолчанию с сопоставлением с образцом необходимо соблюдать осторожность. Значения по умолчанию подставляются только при отсутствии соответствующего аргумента, но сопоставление с образцом происходит уже после подстановки значений по умолчанию.

Например:

```ruby
def f(x \\ 1, 2) do
  x
end
```
Такой код вызовет ошибку компиляции, поскольку после подстановки значения по умолчанию параметр `2` не является допустимым идентификатором.

## Практические применения

- Упрощение интерфейса функций, позволяя задавать только необходимые параметры, а остальные оставлять на усмотрение разработчика функции.
- Реализация функций с опциональными параметрами без необходимости создавать отдельные версии функций с разной арностью.
- Повышение читабельности и удобства использования кода.

## Особенности и ограничения

- Значения по умолчанию вычисляются в момент вызова функции, а не во время компиляции.
- Порядок параметров критичен: все параметры с аргументами по умолчанию должны располагаться после обязательных.
- Аргументы по умолчанию не работают с макросами так же, как с обычными функциями.
- В случае наличия нескольких определений функции с разной арностью и аргументами по умолчанию, при вызове используется наиболее подходящая по арности версия.

## Примеры практического использования

```python
def сумма(a, b \\ 0), do: a + b
def умножение(a, b \\ 1), do: a * b
def формировать_сообщение(текст, уровень \\ :info), do: "[#{уровень}] #{текст}"
```

## Аргументы по умолчанию и документация

Задание аргументов по умолчанию способствует более полной и понятной документации функций. При генерации документации с помощью инструментов Elixir, значения по умолчанию автоматически включаются в описание функций.

## Сводные положения

- Аргументы по умолчанию позволяют определять функции с опциональными параметрами.
- Значения по умолчанию задаются только для последних параметров.
- Компилятор Elixir автоматически создает версии функций с разной арностью на основе наличия аргументов по умолчанию.
- Аргументы по умолчанию повышают гибкость и удобство использования функций, улучшая интерфейс и читаемость кода.