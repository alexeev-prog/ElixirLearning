Лямбда-функции, или анонимные функции, представляют собой объекты первого класса, не связанные с именем и определяемые непосредственно в выражении. В языке Elixir лямбда-функции объявляются с использованием специального синтаксиса: `fn ... -> ... end`. Они играют ключевую роль в функциональном программировании, позволяя создавать компактные, передаваемые и возвращаемые функции без необходимости именования.

## Определение и синтаксис лямбда-функций

Лямбда-функция в Elixir определяется посредством конструкции `fn` для объявления, последовательности параметров, стрелки `->` и тела функции, завершающихся ключевым словом `end`.

```ini

add = fn (a, b) -> a + b end
```
- `fn` – ключевое слово для объявления анонимной функции.
- Параметры функции перечисляются через запятую внутри круглых скобок.
- Тело функции следует после стрелки `->`.
- Ключевое слово `end` завершает определение лямбда-функции.

Лямбда-функции могут содержать несколько выражений и возвращают результат последнего вычисленного выражения.

## Особенности лямбда-функций

- Лямбда-функции — объекты первого класса: их можно присваивать переменным, передавать как параметры другим функциям и возвращать из функций.
- Лямбда-функции имеют собственную область видимости.
- Лямбда-функции поддерживают сопоставление с образцом в определении параметров.
- В отличие от именованных функций, лямбда-функции всегда требуют полного указания количества параметров (арности).

## Передача и вызов лямбда-функций

Для вызова лямбда-функции в Elixir используется специальный оператор `.()`.

```ini

result = add.(3, 5)  
```  
- Лямбда-функции нельзя вызывать как именованные (`add(3, 5)` вызовет ошибку).

## Многообразие сигнатур и сопоставление с образцом

Лямбда-функция может содержать несколько ветвей с различными паттернами для параметров.

```ruby

handle = fn
  {:ok, value} -> "Успешно: #{value}"
  {:error, reason} -> "Ошибка: #{reason}"
end
```
- Каждая ветвь определяется отдельным `->` с сопоставлением с образцом.
- Ветвь выбирается на основании соответствия переданных аргументов определённому паттерну.

## Замыкания и область видимости

Лямбда-функции в Elixir являются замыканиями: они могут захватывать переменные из окружающего контекста, существовавшего в момент их создания.

```ini

factor = 2
multiply = fn x -> x * factor end
result = multiply.(5) 
``` 
- Захваченные переменные доступны внутри лямбда-функции, но их изменение вне функции после создания лямбды не влияет на значение внутри неё.

## Использование лямбда-функций в стандартных библиотеках

Лямбда-функции широко применяются в стандартных библиотеках и модулях, таких как `Enum` и `Stream`, для передачи пользовательских функций в качестве аргументов к функциям высшего порядка.

```rust

Enum.map([1, 2, 3], fn x -> x * 2 end) 
Enum.filter([1, 2, 3], fn x -> rem(x, 2) == 1 end) 
``` 
- Лямбда-функции позволяют реализовывать произвольную логику обработки коллекций и потоков данных.

## Анонимные функции и конвенции передачи в другие функции

Для передачи лямбда-функций как параметров часто используется сокращённая запись с помощью захвата имени и арности существующей функции посредством `&имя/арность`.

```css

Enum.map([1,2,3], &(&1 * 3)) 
``` 

- `&1`, `&2` и т. д. — позиционные параметры.
- Такая запись компилируется в лямбда-функцию.

## Встроенные ограничения и особенности

- Лямбда-функции не могут быть рекурсивными напрямую, поскольку не имеют имени. Для рекурсии требуется особая техника — передача самой функции в качестве аргумента или использование именованных функций.
- Лямбда-функции не поддерживают дополнительные элементы сигнатуры, такие как guard-выражения (`when`), которые доступны только в именованных функциях.

## Типизация и ошибки времени выполнения

- Лямбда-функции динамически типизированы: попытка вызвать лямбда-функцию с неправильным количеством аргументов вызовет ошибку `FunctionClauseError`.
- Арность (количество параметров) лямбда-функции фиксирована на момент объявления.

## Внутреннее представление и сравнение с именованными функциями

- Лямбда-функции — структуры данных, которые можно передавать, хранить и даже сериализовать, однако область их применения ограничена текущим процессом и сессией.
- Именованные функции определяются внутри модулей и доступны по имени и арности, анонимные — через переменные и оператор `.()`.
- Лямбда-функция может быть возвращена из функции в качестве значения или передана в другую функцию.

## Практические применения

- Передача пользовательской логики в функции высшего порядка для обработки коллекций, потоков и асинхронных задач.
- Инкапсуляция локального поведения без загрязнения пространств имён.
- Организация замыканий с захватом состояния при построении сложных вычислений.
- Использование как обратных вызовов (callback functions) в асинхронных и событийно-ориентированных моделях.

## Сравнение с аналогами в других языках

Лямбда-функции Elixir по своей природе аналогичны лямбда-выражениям в других функциональных языках, например, в Erlang, JavaScript, Python, но имеют свой синтаксис и особенности, связанные с функциональной моделью и неизменяемостью данных.

## Обобщение

- Лямбда-функции в Elixir — фундаментальный инструмент функционального программирования, предоставляющий гибкость, выразительность и поддержку высших порядков абстракции.
- Они используются при работе с коллекциями, потоками данных, событиями и обратными вызовами, а также для построения модульных и масштабируемых вычислений.